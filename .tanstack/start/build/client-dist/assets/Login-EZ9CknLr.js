import{j as e,B as m,u,L as x}from"./main-CGeaazTl.js";import{u as h}from"./useMutation-DvmnZMGX.js";import{l as p}from"./auth-DCz9vEGZ.js";import{C as j,a as f,b as g,c as w,d as N}from"./card-CXjTRN6r.js";import{L as n,I as l,A as c,C as o,a as d}from"./alert-COUP8Xdl.js";function v({actionText:t,onSubmit:s,status:r,afterSubmit:i}){return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:e.jsxs(j,{className:"w-full max-w-md",children:[e.jsxs(f,{children:[e.jsx(g,{className:"text-2xl text-center",children:t}),e.jsxs(w,{className:"text-center",children:["Enter your credentials to ",t.toLowerCase()]})]}),e.jsx(N,{children:e.jsxs("form",{onSubmit:a=>{a.preventDefault(),s(a)},className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"email",children:"Email"}),e.jsx(l,{id:"email",name:"email",type:"email",placeholder:"Enter your email",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"password",children:"Password"}),e.jsx(l,{id:"password",name:"password",type:"password",placeholder:"Enter your password",required:!0})]}),e.jsx(m,{type:"submit",className:"w-full",disabled:r==="pending",children:r==="pending"?"Loading...":t}),i]})})]})})}function A(){var r;const t=u(),s=h({fn:p,onSuccess:async i=>{var a;if(!((a=i.data)!=null&&a.error)){await t.invalidate(),t.navigate({to:"/"});return}}});return e.jsx(v,{actionText:"Login",status:s.status,onSubmit:i=>{const a=new FormData(i.target);s.mutate({data:{email:a.get("email"),password:a.get("password")}})},afterSubmit:e.jsxs("div",{className:"space-y-4",children:[s.data&&e.jsxs(c,{variant:"destructive",children:[e.jsx(o,{className:"h-4 w-4"}),e.jsx(d,{children:s.data.message})]}),((r=s.data)==null?void 0:r.error)&&s.data.message==="Email not confirmed"&&e.jsxs(c,{children:[e.jsx(o,{className:"h-4 w-4"}),e.jsxs(d,{children:[e.jsx("p",{className:"font-medium",children:"Account not verified"}),e.jsx("p",{className:"text-sm",children:"Please check your email and click the confirmation link to activate your account."})]})]}),e.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:["Don't have an account?"," ",e.jsx(m,{asChild:!0,variant:"link",className:"p-0 h-auto",children:e.jsx(x,{to:"/signup",children:"Sign up"})})]})]})})}export{A as L};
