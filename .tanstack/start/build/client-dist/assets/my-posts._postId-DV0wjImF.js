import{k as l,h as p,l as g,m as c,j as f}from"./main-CGeaazTl.js";import{P as b}from"./PostForm-EeFO0mkk.js";import{u}from"./useMutation-DvmnZMGX.js";import"./badge-B8E1XRPU.js";import"./card-CXjTRN6r.js";import"./alert-COUP8Xdl.js";function h(){var i,n,r;const t=l.useLoaderData(),a=p(),s=u({fn:g,onSuccess:()=>{a({to:"/my-posts"})}}),o=u({fn:c,onSuccess:()=>{a({to:"/my-posts"})}}),m=e=>{s.mutate({data:{id:t.id,title:e.title,body:e.body||void 0,status:e.status,tags:e.tags,featured_image:e.featured_image}})},d=()=>{o.mutate({data:t.id})};return f.jsx(b,{title:"Edit Post",initialData:{title:t.title,body:t.body||"",status:t.status,tags:((i=t.tags)==null?void 0:i.map(e=>e.name))||[],featured_image:t.featured_image||""},submitButtonText:"Save Changes",onSubmit:m,isSubmitting:s.status==="pending",error:s.status==="error"?`Failed to save post: ${(n=s.error)==null?void 0:n.message}`:void 0,showDeleteButton:!0,onDelete:d,isDeletingButtonText:"Delete Post",isDeleting:o.status==="pending",deleteError:o.status==="error"?`Failed to delete post: ${(r=o.error)==null?void 0:r.message}`:void 0},t.id)}export{h as component};
