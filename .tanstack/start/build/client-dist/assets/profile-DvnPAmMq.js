import{b as t,d as s,e as c,u as m,j as e,L as u}from"./main-CGeaazTl.js";import{u as g}from"./useMutation-DvmnZMGX.js";const x=s("src_utils_profiles_ts--getProfile_createServerFn_handler","/_serverFn");t({method:"GET"}).handler(x);const h=s("src_utils_profiles_ts--upsertProfile_createServerFn_handler","/_serverFn"),p=t({method:"POST"}).handler(h),b=s("src_utils_profiles_ts--ensureProfile_createServerFn_handler","/_serverFn");t({method:"POST"}).handler(b);function f(){var n;const{user:a}=c.useRouteContext(),o=m(),r=g({fn:p,onSuccess:async()=>{await o.invalidate()}}),l=d=>{d.preventDefault();const i=new FormData(d.currentTarget).get("name");a&&r.mutate({data:{user_id:a.id,name:i.trim()}})};return a?e.jsx("div",{className:"bg-white dark:bg-gray-900 p-6 rounded-lg shadow-sm border dark:border-gray-700",children:e.jsxs("form",{onSubmit:l,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email"}),e.jsx("input",{type:"email",id:"email",value:a.email,disabled:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-gray-50 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Email cannot be changed"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Name"}),e.jsx("input",{type:"text",id:"name",name:"name",defaultValue:((n=a.profile)==null?void 0:n.name)||"",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 dark:bg-gray-800 dark:text-white",placeholder:"Enter your name"})]}),r.error&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:e.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400",children:["Error:"," ",r.error instanceof Error?r.error.message:"Something went wrong"]})}),r.status==="success"&&e.jsx("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-md",children:e.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:"Profile updated successfully!"})}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",disabled:r.status==="pending",className:"px-4 py-2 bg-cyan-600 text-white rounded-md hover:bg-cyan-700 focus:outline-none focus:ring-2 focus:ring-cyan-500 disabled:opacity-50 disabled:cursor-not-allowed",children:r.status==="pending"?"Saving...":"Save Changes"}),e.jsx(u,{to:"/my-posts",className:"px-4 py-2 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md hover:bg-gray-400 dark:hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"})]})]})}):null}function _(){return e.jsx("div",{className:"p-4 max-w-2xl mx-auto",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Profile Settings"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:"Update your profile information"})]}),e.jsx(f,{})]})})}export{_ as component};
