import{u as d,r as o,G as c,H as m,j as e,L as i}from"./main-CGeaazTl.js";import{u as h}from"./useMutation-DvmnZMGX.js";import{e as u}from"./auth-DCz9vEGZ.js";function g(r){const a=d();return o.useCallback(async(...s)=>{try{const t=await r(...s);if(c(t))throw t;return t}catch(t){if(c(t))return t.options._fromLocation=a.state.location,a.navigate(a.resolveRedirect(t).options);throw t}},[a,r])}function p(){var t,n;const r=d(),{code:a}=m.useSearch(),s=h({fn:g(u),onSuccess:async x=>{var l;(l=x.data)!=null&&l.success&&(await r.invalidate(),setTimeout(()=>{r.navigate({to:"/"})},2e3))}});return o.useEffect(()=>{a&&s.status==="idle"&&s.mutate({data:{code:a}})},[a,s]),a?s.status==="pending"?e.jsx("div",{className:"fixed inset-0 bg-white dark:bg-black flex items-start justify-center p-8",children:e.jsx("div",{className:"bg-white dark:bg-gray-900 p-8 rounded-lg shadow-lg max-w-md",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"⏳"}),e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Confirming your account..."}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Please wait while we verify your email."})]})})}):(t=s.data)!=null&&t.error?e.jsx("div",{className:"fixed inset-0 bg-white dark:bg-black flex items-start justify-center p-8",children:e.jsx("div",{className:"bg-white dark:bg-gray-900 p-8 rounded-lg shadow-lg max-w-md",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"❌"}),e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Confirmation failed"}),e.jsx("p",{className:"text-red-400 mb-4",children:s.data.message}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"The confirmation link may be expired or invalid."}),e.jsx(i,{to:"/login",className:"text-blue-500 hover:underline",children:"← Back to Login"})]})})}):(n=s.data)!=null&&n.success?e.jsx("div",{className:"fixed inset-0 bg-white dark:bg-black flex items-start justify-center p-8",children:e.jsx("div",{className:"bg-white dark:bg-gray-900 p-8 rounded-lg shadow-lg max-w-md",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"✅"}),e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Email confirmed!"}),e.jsx("p",{className:"text-green-600 dark:text-green-400 mb-4",children:"Your account has been successfully verified and you are now logged in."}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Redirecting you to the home page..."}),e.jsx(i,{to:"/",className:"text-blue-500 hover:underline",children:"Continue to Home →"})]})})}):null:e.jsx("div",{className:"fixed inset-0 bg-white dark:bg-black flex items-start justify-center p-8",children:e.jsx("div",{className:"bg-white dark:bg-gray-900 p-8 rounded-lg shadow-lg max-w-md",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"❌"}),e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Invalid confirmation link"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"The confirmation link appears to be invalid or expired."}),e.jsx(i,{to:"/login",className:"text-blue-500 hover:underline",children:"← Back to Login"})]})})})}export{p as component};
